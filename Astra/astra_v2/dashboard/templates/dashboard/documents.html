{% extends "home/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/documents.css' %}">
{% endblock %}

{% block content %}
<div class="documents-container">
    <h2>–ë–∞–Ω–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>
    <div class="search-bar">
    <input type="text" id="documents-search-bar" placeholder="üîç –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤">
    </div>
    <div class="document-list">
        {% for document in documents %}
        <div class="document-item">
            <a href="{% url 'edit_document' document.pk %}">
                <h3>{{ document.title }}</h3>
                <p class="document-description">{{ document.description }}</p>
                <ul>
                    {% for tag in document.tags.all %}
                    <li>{{ tag.name }}</li>
                    {% endfor %}
                </ul>
            </a>
        </div>
        {% endfor %}
    </div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function () {
    const searchBar = document.getElementById("documents-search-bar");
    if (searchBar) {
        searchBar.addEventListener("input", function () {
            const searchQuery = this.value.toLowerCase();
            const documents = document.querySelectorAll(".document-item");

            documents.forEach((doc) => {
                const title = doc.querySelector("h3").innerText.toLowerCase(); // –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
                const description = doc.querySelector(".document-description").innerText.toLowerCase(); // –û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
                
                if (title.includes(searchQuery) || description.includes(searchQuery)) {
                    doc.style.display = "block"; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–≤–ø–∞–≤—à–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                } else {
                    doc.style.display = "none"; // –°–∫—Ä—ã–≤–∞–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ
                }
            });
        });
    }
});
</script>
{% endblock %}
